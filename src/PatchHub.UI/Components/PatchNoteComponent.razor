@using PatchHub.Infrastructure.Contracts.Responses
@using PatchHub.Infrastructure.Models
@using PatchHub.Parsers.Services
@using Microsoft.JSInterop
@inject ParsingService ParsingService
@inject IJSRuntime JsRuntime

@if(newsItem != null) 
{
    <MudPaper 
        id="PatchNoteComponent" 
        Elevation="6" 
        Class="py-8 px-4 overflow-y-scroll rounded-lg news-container" 
        Style="height:calc(100vh - 275px);">
        <MudContainer Fixed="true" Style="max-height: fit-content;">
            <MudStack Spacing="6">
                <MudStack Spacing="0">
                    <MudStack Row="true">
                        <MudText Typo="Typo.h5">@SteamApp.AppName</MudText>
                        <MudSpacer />
                        <MudText Typo="Typo.h6" Align="Align.End">@CreateDateTime(newsItem.date).ToString("MM/dd/yyyy")</MudText>
                    </MudStack>
                    <MudText Typo="Typo.caption">
                        @newsItem.author
                    </MudText>
                </MudStack>
                <MudStack Row="true" Spacing="4">
                    <MudLink Href="@newsItem.url">
                        <MudText Typo="Typo.h6">@newsItem.title</MudText>
                    </MudLink>
                </MudStack>
                <MudContainer Fixed="true" Class="px-0" Style="overflow:auto;word-wrap: break-word;">
                        <MudMarkdown Value="@ParsingService.ParseBBCode(newsItem.contents, true)" 
                            CodeBlockTheme="CodeBlockTheme.AtomOneDarkReasonable"
                            OverrideHeaderTypo="@(e => Typo.h5)" />
                </MudContainer>
            </MudStack>
        </MudContainer>
    </MudPaper>
}

<style>
    img {
        display: block;
        width: auto;
        height: auto;
        max-width: 100%;
    }
    .news-container {
        background-color: @Colors.Grey.Darken4;
    }
</style>
