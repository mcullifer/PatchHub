@using PatchHub.UI.Components
@page "/"
@page "/{GameName}"
<PageTitle>PatchHub - @(GameName ?? "Home")</PageTitle>

<MudGrid Spacing="4" Class="py-0 my-0 overflow-auto">
    <MudContainer Class="d-flex justify-start ma-8">
        <MudItem xs="12" md="5" >
            <MudAutocomplete T="SteamApp" Label="Search For A Game"
                             Variant="Variant.Outlined"
                             ValueChanged="SearchValueChanged"
                             SearchFunc="SearchGames"
                             ToStringFunc="@(e => e == null ? null : e.AppName)"
                             ResetValueOnEmptyText="true"
                             CoerceText="true"
                             CoerceValue="false"
                             AdornmentIcon="@Icons.Material.Filled.VideogameAsset"
                             IconSize="Size.Large"
                             AdornmentColor="Color.Info"
                             ShowProgressIndicator="true"
                             MaxItems="20"
                             SelectValueOnTab="true"
                             SelectOnClick="true" 
                             @ref="SearchBar">
                <ProgressIndicatorInPopoverTemplate>
                    <MudProgressLinear Size="Size.Large" Indeterminate="true" Color="Color.Primary" />
                </ProgressIndicatorInPopoverTemplate>
                <NoItemsTemplate>
                    <MudText Typo="Typo.body1">
                        ☝️Search for a game to explore patch notes!
                    </MudText>
                </NoItemsTemplate>
            </MudAutocomplete>
        </MudItem>
    </MudContainer>

    @if (ShowContent) 
    {
        <MudItem xs="12">
            <PatchNotesComponent SteamApplication="SelectedGame" />
        </MudItem>
    }
</MudGrid>